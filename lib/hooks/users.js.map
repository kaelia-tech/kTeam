{"version":3,"sources":["../../src/hooks/users.js"],"names":["updateAbilities","hook","type","Error","authorisationService","app","getService","updateAbilitiesForSubject","params","user"],"mappings":";;;;;QAAgBA,e,GAAAA,e;AAAT,SAASA,eAAT,CAA0BC,IAA1B,EAAgC;AACrC,MAAIA,KAAKC,IAAL,KAAc,OAAlB,EAA2B;AACzB,UAAM,IAAIC,KAAJ,yEAAN;AACD;;AAED,MAAIC,uBAAuBH,KAAKI,GAAL,CAASC,UAAT,CAAoB,gBAApB,CAA3B;AACAF,uBAAqBG,yBAArB,CAA+CN,KAAKO,MAAL,CAAYC,IAA3D;;AAEA,SAAOR,IAAP;AACD","file":"users.js","sourcesContent":["export function updateAbilities (hook) {\r\n  if (hook.type !== 'after') {\r\n    throw new Error(`The 'updateAbilities' hook should only be used as a 'after' hook.`)\r\n  }\r\n\r\n  let authorisationService = hook.app.getService('authorisations')\r\n  authorisationService.updateAbilitiesForSubject(hook.params.user)\r\n\r\n  return hook\r\n}\r\n"]}